name: Pre-scan DPIA
urn: 'urn:nl:prescan:2.0'
version: "2.0"
description: >-
  Een Pre-scan DPIA is een vastlegging van de impact die een bepaalde gegevensverwerking heeft of kan hebben op de privacy van burgers.
tasks: 
- task: Inleiding
  description: >-
    De vastlegging van de pre-scan DPIA wordt gekenmerkt door de pre-scan DPIA code.
    In de inleiding wordt de organisatorische activiteit beschreven waarvoor de pre-scan DPIA wordt uitgevoerd, in een organisatorische activiteit beschrijving. Deze omvat een beschrijving van de verwerking of het geheel van verwerkingen, waarin wordt aangegeven om welke processen, systemen en applicaties het gaat, wat de context van de verwerking is (door wie, waar, waarom en hoe), en hoeveel gegevens over wie wordt vastgelegd met welk doel.
    Vervolgens wordt vastgesteld of de organisatorische activiteit persoonsgegevens verwerkt, wat kan worden vastgelegd in een classificatie persoonsgegevens. Indien er geen persoonsgegevens worden verwerkt, hoeven er verder geen vragen te worden beantwoord.
    Als na invullen van de pre-scan DPIA blijkt dat er een DPIA nodig is, dan is de organisatorische activiteit een organisatorische activiteit met DPIA-verplichting.
  id: "0"
  category: Inleiding/Algemeen 
  type: 
    - task_group
  repeatable: false 
  tasks: 
    - task: Beschrijving van de verwerking 
      description: >-
        Geef een korte beschrijving van de verwerking of het geheel van verwerkingen: om welk proces/systeem/applicatie gaat het. 
        Besteed daarbij aandacht aan de context waarin de verwerking plaatsvindt, door wie, waar, waarom en hoe. 
        Om wat voor bedrijfsproces(sen) gaat het en om hoeveel gegevens over wie. 
        Deze input kun je hergebruiken voor paragraaf 1 van het Model DPIA Rijksdienst.
      id: "0.1"
      prescan_model_id: 1
      repeatable: false 
      type: 
        - open_text
    - task: Doel gegevensverwerking
      description: >-
        Welk doel wil de organisatie bereiken met de gegevensverwerking? 
        Dit kan hergebruikt worden in paragraaf 5 van het Model DPIA Rijksdienst.
      id: "0.2"
      prescan_model_id: 2
      links: {"DPIA": "3.1.5"} #paragraaf 5
      repeatable: false 
      type: 
        - open_text
    - task: Wat is de grondslag voor de verwerking? 
      id: "0.3"
      prescan_model_id: 3
      links: {"DPIA":"12.1.1.1"} #paragraaf 11
      repeatable: false 
      type: 
        - open_text
    - task: "Cloudgebruik"
      id: "0.4"
      type: 
        - task_group
      repeatable: false
      tasks:
       - task: Is er sprake van cloudgebruik? 
         id: "0.4.1"
         repeatable: false
         type: 
           - radio_option
         valueType: boolean
         defaultValue: false
         options: 
           - value: true
             label: Ja
           - value: false
             label: Nee
       - task: Selecteer een of meer van onderstaande opties 
         id: "0.4.2"
         prescan_model_id: 4
         type: 
           - checkbox_option
         options: 
           - value: Een Saas, IaaS of PaaS oplossing 
           - value: Cloudopslag van data 
           - value: Een applicatie die gebruik maakt van een subverwerker voor cloudopslag (bijv. Azure, AWS, Google Cloud)
           - value: On premise toepassing met functionaliteiten van het internet vanuit de cloud (hybrid cloud)
         dependencies: 
           - type: conditional 
             condition: 
               id: "0.4.1"
               operator: equals 
               value: true 
             action: show
         repeatable: false
       - task: Welke vorm van cloud betreft het? 
         id: "0.4.3"
         prescan_model_id: 5
         type: 
           - radio_option
         options: 
           - label: Public cloud
             value: Public cloud
           - label: Private cloud
             value: Private cloud
           - label: Hybrid
             value: Hybrid
         dependencies: 
           - type: conditional 
             condition: 
               id: "0.4.1"
               operator: equals 
               value: true 
             action: show
         repeatable: false 
       - task: Gaat het om materieel public cloudgebruik voor de primaire taak?
         id: "0.4.4"
         prescan_model_id: 6
         type: 
           - radio_option
         options: 
           - value: true
             label: Ja
           - value: false
             label: Nee
         dependencies: 
           - type: conditional 
             condition: 
               id: "0.4.1"
               operator: equals 
               value: true 
             action: show
         repeatable: false 
- task: Gegevensverwerking
  description: >-
    "Indien een organisatorische activiteit persoonsgegevens niet meteen een DPIA-verplichting krijgt door een gegevensverwerking op de lijst AP of lijst EPDB, 
    dan spreken we van een organisatorische activiteit zonder DPIA-verplichting o.b.v. lijst AP of EDPB.
    Daarbij leggen we een aantal gegevens vast die uitsluitsel kunnen geven over de vraag of er alsnog een DPIA-verplichting ontstaat.<br>

    Indien er een classificatie persoonsgegevens aanwezig is met waarde bevat persoonsgegevens, dan wordt vastgelegd in de classificatie type persoonsgegevens of er sprake is van:

    - gewoon persoonsgegeven
    - gevoelig persoonsgegeven
    - bijzonder persoonsgegeven
    - strafrechtelijk persoonsgegeven
    - nationaal identificatienummer

    Voor de pre-scan DPIA beschouwen we strafrechtelijke persoonsgegevens en nationale identificatienummers als gevoelige gegevens.
    Bij een verwerking van persoonsgegevens is er sprake van een organisatorische activiteit persoonsgegevens.""
  id: "1"
  category: Gegevensverwerking
  type: 
    - task_group
  repeatable: false 
  tasks: 
  - task: Gewone persoonsgegevens
    id: "1.8"
    type:
      - task_group
    repeatable: false
    tasks:
      - task: Gaat het systeem categorieën gewone persoonsgegevens verwerken?
        description: >-
          Er is sprake van een organisatorische activiteit gewone persoonsgegevens als de organisatorische activiteit een classificatie type persoonsgegevens heeft, met als waarde "bevat gewone persoonsgegevens". 
          In dat geval wordt bij die organisatorische activiteit de categorie gewone persoonsgegevens vastgelegd.
        id: "1.8.1"
        prescan_model_id: 7
        type: 
          - radio_option
        valueType: boolean
        defaultValue: false
        options: 
          - value: true
            label: Ja
          - value: false
            label: Nee
        repeatable: false 
      - task: Gaat het systeem een van onderstaande gewone persoonsgegevens verwerken? Selecteer één of meer opties. 
        id: "1.8.2"
        prescan_model_id: 7
        type: 
        - checkbox_option
        options: 
        - value: Apparaat- en internetgegevens
        - value: Content
        - value: Demografische gegevens
        - value: Diagnostische gegevens of telemetrie
        - value: Gegevens verzameld via een website
        - value: Helpdeskgegevens
        - value: Logging
        - value: Naam, contactgegevens
        - value: Overige
        calculation:
          scoreKey: "gewone_persoonsgegeven"   # This creates a variable named gewone_persoonsgegeven
          expression: "answers('1.8.2') | count"  # Count selected items
          riskScore:
            - when: "gewone_persoonsgegeven < 6"
              value: 0
            - when: "gewone_persoonsgegeven >= 6"
              value: 1
        repeatable: false 
        dependencies: 
          - type: conditional 
            condition: 
              id: "1.8.1"
              operator: equals 
              value: true 
            action: show
      - task: Specificeer
        id: "1.8.3"
        type:
        - open_text
        dependencies: 
        - type: conditional 
          condition: 
            id: "1.8.1"
            operator: equals 
            value: true 
          action: show
        repeatable: false 
  - task: Bijzondere persoonsgegevens
    id: "1.9"
    type:
      - task_group
    repeatable: false
    tasks:
      - task: Gaat het systeem bijzondere persoonsgegevens verwerken? 
        description: >-
          Er is sprake van een organisatorische activiteit bijzondere persoonsgegevens als de organisatorische activiteit een classificatie type persoonsgegevens heeft, met als waarde Classificatie type persoonsgegevens: Bijzonder. 
          In dat geval wordt vastgelegd om welk classificatie type bijzondere persoonsgegevens het gaat.
        id: "1.9.1"
        prescan_model_id: 8
        type: 
        - radio_option
        valueType: boolean
        defaultValue: false
        options: 
        - value: true
          label: Ja
        - value: false
          label: Nee
        repeatable: false 
        links: {"DPIA": "13.1.1"} #paragraaf 12
      - task: Gaat het systeem een van onderstaande bijzondere persoonsgegevens verwerken? Selecteer één of meer opties. 
        id: "1.9.2"
        prescan_model_id: 8
        type: 
        - checkbox_option
        links: {"DPIA": "13.1.2.3"} #paragraaf 12
        options: 
        - value: Biometrische gegevens met het oog op identificatie
        - value: Gegevens over seksuele geaardheid of seksueel gedrag
        - value: Gegevens over gezondheid
        - value: Genetische gegevens
        - value: Persoonsgegevens waaruit het lidmaatschap van een vakbond blijkt 
        - value: Persoonsgegevens waaruit politieke opvattingen blijken
        - value: Persoonsgegevens waaruit ras of etnische afkomst blijkt
        - value: Persoonsgegevens waaruit religieuze of levensbeschouwelijke overtuigingen blijken
        dependencies: 
        - type: conditional 
          condition: 
            id: "1.9.1"
            operator: equals 
            value: true 
          action: show
        repeatable: false
        calculation:
          scoreKey: "bijzonder_persoonsgegeven"
          expression: "answers('1.9.2') | count"
          riskScore:
            - when: "bijzonder_persoonsgegeven == 0"
              value: 0
            - when: "bijzonder_persoonsgegeven >= 1 && bijzonder_persoonsgegeven <= 6"
              value: 1
            - when: "bijzonder_persoonsgegeven > 6"
              value: 2
  - task: Overige gevoelige persoonsgegevens
    id: "1.10"
    type:
      - task_group
    repeatable: false
    tasks:
      - task: Gaat het systeem ook andere gevoelige persoonsgegevens verwerken? 
        description: >-
          Er is sprake van een organisatorische activiteit gevoelige persoonsgegevens als de organisatorische activiteit een classificatie type persoonsgegevens heeft, met als waarde Classificatie type persoonsgegevens: Gevoelig. 
          In dat geval wordt bij die organisatorische activiteit de categorie gevoelige persoonsgegevens vastgelegd.
        id: "1.10.1"
        prescan_model_id: 9
        type: 
        - radio_option
        valueType: boolean
        defaultValue: false
        options: 
        - value: true
          label: Ja
        - value: false
          label: Nee
        repeatable: false
      - task: Gaat het systeem een van onderstaande gevoelige persoonsgegevens verwerken? Selecteer één of meer opties. 
        id: "1.10.2"
        prescan_model_id: 9
        type: 
        - checkbox_option
        options: 
        - value: Surfgedrag 
        - value: Gegevens over de financiele situatievan de betrokkene
        - value: Gegevens die kunnen worden gebruikt voor (identiteits)fraude
        - value: Gegevens die betrekking hebben op kwetsbare groepen
        - value: Gebruikersnamen, wachtwoorden en andere inloggegevens
        - value: Communicatie- en locatiegegevens
        - value: Nationale identificatienummers (bijv. BSN)
        - value: Strafrechtelijke gegevens
        - value: (Andere) gegevens die kunnen leiden tot stigmatisering of uitsluiting van de betrokkene
        calculation:
          scoreKey: "gevoelig_persoonsgegeven"
          expression: "answers('1.10.2') | count"
          riskScore:
            - when: "gevoelig_persoonsgegeven == 0"
              value: 0
            - when: "gevoelig_persoonsgegeven >= 1 && gevoelig_persoonsgegeven <= 6"
              value: 1
            - when: "gevoelig_persoonsgegeven > 6"
              value: 2
        dependencies: 
        - type: conditional 
          condition: 
            id: "1.10.1"
            operator: equals 
            value: true 
          action: show
        repeatable: false
  - task: Welke categorieën betrokkken kun je onderscheiden? 
    description: >-
      Er wordt ook vastgelegd welke categorie betrokkenen onderwerp zijn van de gegevens die worden verwerkt, evenals het aantal betrokkenen in die categorie.
    id: "1.11" 
    prescan_model_id: 10
    type: 
    - checkbox_option
    options: 
    - value: Medewerkersbewindspersonen
    - value: Burgers over wie gegevens worden verwerkt in het proces/systeem/applicatie
    - value: Kinderen jonger dan 16 jaar
    - value: Andere kwetsbare groepen (gehandicapten, minderheden, etc.)
    - value: Specificatie categorie betrokkenen (bijv. vanuit uitvoeringswetgeving)
    calculation:
      scoreKey: "betrokkenen"
      expression: "weightedCountMap(
        answers('1.11'),
        [
          'Medewerkers/bewindspersonen',
          'Burgers over wie gegevens worden verwerkt in het proces/systeem/applicatie',
          'Kinderen jonger dan 16 jaar',
          'Andere kwetsbare groepen (gehandicapten, minderheden, etc.)',
          'Specificatie categorie betrokkenen (bijv. vanuit uitvoeringswetgeving)'
        ],
        [1, 1, 3, 3, 0])"
      riskScore:
        - when: "betrokkenen <= 2"
          value: 0
        - when: "betrokkenen == 3"
          value: 1
        - when: "betrokkenen >= 4"
          value: 2
    repeatable: false 
  - task: Geef een omschrijving van de doelgroep 
    id: "1.12"
    prescan_model_id: 10
    type:
    - text_input
    repeatable: false 
  - task: Wat is naar schatting de omvang van de gegevensset/de verwerking? 
    id: "1.13"
    prescan_model_id: 11
    type: 
    - task_group
    repeatable: false 
    tasks: 
      - task: Aantal betrokkenen (hoeveelheden in getallen bijv. 300 of 10000).
        id: "1.13.1"
        prescan_model_id: 11.a
        type: 
        - task_group
        repeatable: false 
        tasks: 
          - task: Medewerkers/bewindspersonen #RM: moet dit ook bewindspersonen zijn of alleen medewerkers?
            id: "1.13.1.1"
            type: 
            - text_input
            repeatable: false 
          - task:  Burgers over wie gegevens worden verwerkt in het proces/systeem/applicatie
            id: "1.13.1.2"
            type:
            - text_input
            repeatable: false 
          - task: Kinderen jonger dan 16 jaar
            id: "1.13.1.3"
            type: 
            - text_input
            repeatable: false 
          - task: Andere kwetsbare groepen (gehandicapten, minderheden, etc.)
            id: "1.13.1.4"
            type: 
            - text_input
            repeatable: false 
          - task: Specificatie categorie betrokkenen (bijv. vanuit uitvoeringswetgeving)
            id: "1.13.1.5"
            type: 
            - text_input
            repeatable: false 
      - task: Hoeveelheid gegevens die per betrokkene wordt verwerkt (hoeveelheid in getallen) #RM: deze vraag heeft geen invloed op de uitkomst. 
        id: "1.13.2"
        prescan_model_id: 11.b
        type: 
        - task_group
        repeatable: false 
        tasks: 
        - task: Medewerkers/bewindspersonen #RM: moet dit ook bewindspersonen zijn of alleen medewerkers?
          id: "1.13.2.1"
          type: 
          - text_input
          repeatable: false 
        - task:  Burgers over wie gegevens worden verwerkt in het proces/systeem/applicatie
          id: "1.13.2.2"
          type:
          - text_input
          repeatable: false 
        - task: Kinderen jonger dan 16 jaar
          id: "1.13.2.3"
          type: 
          - text_input
          repeatable: false 
        - task: Andere kwetsbare groepen (gehandicapten, minderheden, etc.)
          id: "1.13.2.4"
          type: 
          - text_input
          repeatable: false 
        - task: Specificatie categorie betrokkenen (bijv. vanuit uitvoeringswetgeving)
          id: "1.13.2.5"
          type: 
          - text_input
          repeatable: false 
      - task: Frequentie van verwerking 
        id: "1.13.3"
        prescan_model_id: 11.c
        type: 
        - select_option 
        options:
        - value: Continu
        - value: Vaker dan maandelijks
        - value: Minstens maandelijks
        - value: Minstens jaarlijks 
        - value: Onregelmatig 
        - value: Eenmalig 
        repeatable: false
        calculation:
          scoreKey: "frequentie_verwerking"
          expression: "answers('1.13.3')"  # Get the selected value
          riskScore:
          - when: "frequentie_verwerking in ['Eenmalig', 'Onregelmatig', 'Minstens jaarlijks']"
            value: 0
          - when: "frequentie_verwerking in ['Minstens maandelijks', 'Vaker dan maandelijks', 'Continu']"
            value: 1
      - task: Wat is de bewaartermijn van de gegevens? 
        id: "1.13.4"
        prescan_model_id: 11.c
        links: {"DPIA": } #paragraaf 10
        type: 
        - select_option
        options:
        - value: Aantal jaren 
        - value: Jaar
        - value: Minder dan 1 maand
        - value: Minder dan 1 week 
        - value: Minder dan 24 uur
        repeatable: false
        calculation:
          expression: "answers('1.13.4')"
          scoreKey: "bewaartermijn"
          riskScore:
            - when: "bewaartermijn == null"
              value: 0  
            - when: "bewaartermijn in ['Minder dan 24 uur', 'Minder dan 1 week', 'Minder dan 1 maand']"
              value: 0
            - when: "bewaartermijn in ['Jaar', 'Aantal jaren']"
              value: 1
  - task: Zijn de volgende gebruikersgroepen betrokken bij de verwerking? 
    id: "1.14"
    prescan_model_id: 12
    type:
    - task_group
    repeatable: false 
    tasks: 
    - task: Afnemers van de dienst? Bijvoorbeeld burgers die een dienst van de overheid afnamen. 
      id: "1.14.1"
      type: 
      - radio_option
      valueType: boolean
      defaultValue: false
      options:
      - value: true 
        label: Ja
      - value: false 
        label: Nee
      repeatable: false 
    - task: Afnemers van de informatie? Bijvoorbeeld (collega)overheidsorganan die informatie uit de applicatie of het proces halen? 
      id: "1.14.2"
      type: 
      - radio_option
      valueType: boolean
      defaultValue: false
      options:
      - value: true 
        label: Ja
      - value: false 
        label: Nee
      repeatable: false 
- task: Internationale doorgiften 
  description: >-
    Bij de organisatorische activiteit persoonsgegevens wordt vastgelegd of er sprake is van een internationale doorgifte. Als er sprake is van zo'n internationale doorgifte, dan is er sprake van een organisatorische activiteit met internationale doorgifte.
  id: "2"
  type: 
  - task_group
  repeatable: false
  tasks: 
  - task: International doorgiften
    id: "2.1"
    type:
      - task_group
    repeatable: false
    tasks:
      - task: Is er sprake van internationale doorgifte buiten de EER? 
        id: "2.1.1"
        prescan_model_id: 13
        type: 
        - radio_option
        valueType: boolean
        default: false
        options: 
        - value: true
          label: Ja
        - value: false 
          label: Nee
        repeatable: false 
      - task: Waar is het hoofdkantoor van de cloudprovider gevestigd? 
        id: "2.1.2"
        prescan_model_id: 14
        links: {"DPIA": } #paragraaf 8
        type: 
        - radio_option
        options: 
        - value: Binnen EER
          label: Binnen EER
        - value: Buiten EER 
          label: Buiten EER 
        dependencies: 
          - type: conditional 
            condition: 
              id: "2.1.1"
              operator: equals 
              value: true
            action: show
        repeatable: false
      - task: Waar vindt de opslag van de gegevens contractueel plaats? 
        id: "2.1.3"
        prescan_model_id: 15
        type: 
        - radio_option
        options: 
        - label: On premise 
          value: locatie_gegevensopslag
        - label: Datacenter EER
          value: locatie_gegevensopslag
        - label: Buiten EER 
          value: locatie_gegevensopslag
        dependencies: 
          - type: conditional 
            condition: 
              id: "2.1.1"
              operator: equals 
              value: true
            action: show
        repeatable: false
      - task: Van waaruit wordt er support geleverd?
        id: "2.1.4"
        prescan_model_id: 16
        type: 
        - radio_option
        options: 
        - value: Binnen EER
          label: Binnen EER
        - value: Buiten EER 
          label: Buiten EER 
        dependencies: 
          - type: conditional 
            condition: 
              id: "2.1.1"
              operator: equals 
              value: true
            action: show
        repeatable: false
      - task: Waar worden telemetrie en/of diagnostische gegevens verwerkt? 
        id: "2.1.5"
        prescan_model_id: 17
        type: 
        - radio_option
        options: 
        - value: Binnen EER
          label: Binnen EER
        - value: Buiten EER 
          label: Buiten EER 
        dependencies: 
          - type: conditional 
            condition: 
              id: "2.1.1"
              operator: equals 
              value: true
            action: show
        repeatable: false
      - task: Mechanisme(s) voor doorgifte 
        id: "2.1.6"
        prescan_model_id: 18
        type: 
        - radio_option
        options: 
        - value: Adequaatheidsbesluit
          label: Adequaatheidsbesluit
        - value: Standaard contractsbepaling (SCC)
          label: Standaard contractsbepaling (SCC)
        - value: binding corporate rules/bindend bedrijfsvoorschrift (bcr)
          label: binding corporate rules/bindend bedrijfsvoorschrift (bcr)
        - value: Goedgekeurde certificeringsmechanisme 
          label: Goedgekeurde certificeringsmechanisme
        - value: Goedgekeurde gedragscode 
          label: Goedgekeurde gedragscode
        - value: Juridisch bindend en afdwingbaar instrument 
          label: Juridisch bindend en afdwingbaar instrument
        - value: uitzondering artikel 49 avg 
          label: uitzondering artikel 49 avg
        - value: Overig mechanisme
          label: Overig mechanisme
        dependencies: 
          - type: conditional 
            condition: 
              id: "2.1.1"
              operator: equals 
              value: true
            action: show
        repeatable: false
      - task: Specificatie overig doorgiftemechanisme
        id: "2.1.7"
        prescan_model_id: 18
        type:
        - text_input
        dependencies: 
        - type: conditional 
          condition: 
            id: "2.1.6"
            operator: equals 
            value: Overig mechanisme
          action: show
        repeatable: false
      - task: Bevat de doorgifte ook bijzondere persoonsgegevens? 
        id: "2.1.8"
        prescan_model_id: 19
        type: 
        - radio_option
        options: 
        - value: true
          label: Ja
        - value: false
          label: Nee
        dependencies: 
          - type: conditional 
            condition: 
              id: "2.1.1"
              operator: equals 
              value: true
            action: show
        repeatable: false
        calculation:
          scoreKey: "internationale_doorgifte"
          expression: "(answers('2.1.1') == true && ((answers('0.4.1') == true && (answers('2.1.3') == 'Buiten EER' || answers('2.1.4') == 'Buiten EER')) || answers('2.1.8') == true)) ? 2 : ((answers('2.1.1') == true && answers('2.1.8') != true && (answers('0.4.1') != true || (answers('0.4.1') == true && answers('2.1.3') != 'Buiten EER' && answers('2.1.4') != 'Buiten EER'))) || (answers('2.1.1') != true && answers('0.4.1') == true && (answers('2.1.3') == 'Buiten EER' || answers('2.1.4') == 'Buiten EER'))) ? 1 : 0"
          riskScore:
            - when: "internationale_doorgifte == 0"
              value: 0
            - when: "internationale_doorgifte == 1"
              value: 1
            - when: "internationale_doorgifte == 2"
              value: 2
- task: Lijst AP
  description: >-
    Bij de organisatorische activiteit persoonsgegevens moet worden aangegeven of er sprake is van gegevensverwerkingen conform de lijst AP. De Lijst AP is een lijst met soorten gegevensverwerkingen van de [AP] waarvoor een DPIA verplicht is.
  id: "3"
  prescan_model_id: D
  type: 
  - task_group
  repeatable: false
  tasks: 
  - task: Welke groepen betrokkenen kun je onderscheiden? 
    id: "3.1"
    type: 
    - checkbox_option
    options: 
    - value: 'Biometrische gegevens'
    - value: 'Cameratoezicht'
    - value: 'Communicatiegegevens'
    - value: 'Controle werknemers'
    - value: 'Creditscores'
    - value: 'Financiele situatie'
    - value: 'Flexibel camaratoezicht'
    - value: 'Fraudebestrijding'
    - value: 'Genetische persoonsgegeens'
    - value: 'Gezondheidsgegevens'
    - value: 'Heimelijk onderzoek'
    - value: 'Internet of things'
    - value: 'Profilering'
    - value: 'Observatie en beïnvloeding van gedrag'
    - value: 'Locatiegegevens'
    - value: 'Samenwerkingsverbanden'
    - value: 'Zwarte lijsten'
    calculation:
      scoreKey: "ap"
      expression: "answers('3.1') | count"
      riskScore:
        - when: "ap < 2"
          value: 0
        - when: "ap >= 2"
          value: 2
    repeatable: false
- task: Lijst EDPB
  description: >- 
    Bij de organisatorische activiteit persoonsgegevens moet worden aangegeven of er sprake is van gegevensverwerkingen conform de lijst EDPB. De Lijst EDPB is een lijst met soorten gegevensverwerkingen van de [EDPB] waarvoor mogelijk een DPIA verplicht is.
  id: "4"
  prescan_model_id: E
  type: 
  - task_group
  repeatable: false
  tasks: 
  - task: Welke categorieen betrokkenen kun je onderscheiden? 
    id: "4.1"
    type: 
    - checkbox_option
    options: 
    - value: 'Bijzondere persoonsgegevens of zeer gevoelige persoonsgegevens'
    - value: 'Blokkering van een dienst, recht of contract'
    - value: 'Geautomatiseerde besluitvorming'
    - value: 'Gebruik van nieuwe technologieën'
    - value: 'Grootschalige gegevensverwerkingen'
    - value: 'Koppelen van datasets'
    - value: 'Mensen beoordelen met persoonskenmerken (evaluatie of scoring)'
    - value: 'Stelselmatige en grootschalige monitoring'
    - value: 'Verwerking van persoonsgegevens over kwetsbare groepen of personen'
    - value: Geen van bovenstaande 
    calculation:
      scoreKey: "epdb"
      expression: "answers('4.1') | count"
      riskScore:
        - when: "epdb == 1"
          value: 1
        - when: "epdb > 1"
          value: 2
    repeatable: false
- task: Basisregistratie #should be removed, where can we find this info? 
  description: >-
    Bij de organisatorische activiteit persoonsgegevens moet, indien er sprake is van gegevensverwerkingen die gebruik maken van een basisregistratie, worden aangegeven van welke basisregistratie gebruik wordt gemaakt.
  id: "5"
  prescan_model_id: F
  type: 
    - task_group
  repeatable: false
  tasks:
    - task: Basisregistraties
      id: "5.1"
      type:
        - task_group
      repeatable: false
      tasks:
        - task: Betreft het een basisregistratie? 
          id: "5.1.1"
          prescan_model_id: F
          type: 
            - radio_option
          valueType: boolean
          defaultValue: false
          options: 
            - value: true
              label: Ja
            - value: false 
              label: Nee
          repeatable: false 
        - task: Van welke basisregistraties wordt gebruik gemaakt? 
          id: "5.1.2"
          prescan_model_id: F
          type: 
            - checkbox_option
          options: 
            - value: 'Basisregistratie Grootschalige Topografie (BGT)'
            - value: 'Basisregistratie Inkomen (BRI)'
            - value: 'Basisregistratie Kadaster (BRK)'
            - value: 'Basisregistratie Ondergrond (BRO)'
            - value: 'Basisregistratie Personen (BRP)'
            - value: 'Basisregistratie Topografie (BRT)'
            - value: 'Basisregistratie Voertuigen (BRV)'
            - value: 'Basisregistratie Waarde Onroerende Zaken (WOZ)'
            - value: 'Handelsregister (HR)'
            - value: 'Adressen en Gebouwen (BAG)'
          dependencies: 
            - type: conditional 
              condition: 
                id: "5.1.1"
                operator: equals 
                value: true
              action: show
          repeatable: false
          calculation:
            scoreKey: "basisregistratie"
            expression: "weightedCountMap(
              answers('5.1.2'),
              [
                'Basisregistratie Grootschalige Topografie (BGT)',
                'Basisregistratie Inkomen (BRI)',
                'Basisregistratie Kadaster (BRK)',
                'Basisregistratie Ondergrond (BRO)',
                'Basisregistratie Personen (BRP)',
                'Basisregistratie Topografie (BRT)',
                'Basisregistratie Voertuigen (BRV)',
                'Basisregistratie Waarde Onroerende Zaken (WOZ)',
                'Handelsregister (HR)',
                'Adressen en Gebouwen (BAG)'
              ],
              [0, 1, 1, 0, 1, 0, 1, 1, 1, 0])"
            riskScore:
              - when: "basisregistratie == 0"
                value: 0
              - when: "basisregistratie >= 1"
                value: 1
- task: Algoritmes/AI
  description: >-
    Bij de organisatorische activiteit persoonsgegevens kan er sprake zijn van het gebruik van een algoritme. Indien er sprake van een algoritme is, dan is de organisatorische activiteit een organisatorische activiteit met algoritme. Daarbij wordt een aanduiding of er sprake is van inzet van een AI-systeem vastgelegd.
    Als er sprake (is) van een algoritme dat kwalificeert als een AI-systeem, dan is de organisatorische activiteit een Organisatorische activiteit met IAMA-verplichting.
  id: "6"
  type: 
  - task_group
  repeatable: false 
  tasks:
  - task: Algoritmes en AI
    id: "6.1"
    type: 
    - task_group
    repeatable: false
    tasks:
    - task: Wordt er gebruik gemaakt van een algoritme? 
      id: "6.1.1"
      type:
      - radio_option
      valueType: boolean
      defaultValue: false
      options: 
      - value: true
        label: Ja
      - value: false 
        label: Nee 
      repeatable: false 
    - task: Wordt op de uitslag (mede) een besluit over mensen genomen?
      id: "6.1.2"
      type:
      - radio_option
      valueType: boolean
      defaultValue: false
      options: 
      - value: true
        label: Ja
      - value: false 
        label: Nee 
      repeatable: false 
      dependencies: 
      - type: conditional 
        condition: 
          id: "6.1.1"
          operator: equals 
          value: true
        action: show
    - task: Kwalificeert het algoritme als (een onderdeel van) een ‘hoog-risico AI-systeem’ volgens de EU AI-verordening?
      id: "6.1.3"
      type:
      - radio_option
      valueType: boolean
      defaultValue: false
      options: 
      - value: true
        label: Ja
      - value: false 
        label: Nee 
      repeatable: false
      dependencies: 
      - type: conditional 
        condition: 
          id: "6.1.1"
          operator: equals 
          value: true
        action: show
- task: Kinderrechten
  description: >- 
    Bij de organisatorische activiteit persoonsgegevens kan er sprake zijn van een digitale dienst voor personen jonger dan 18 jaar. Als er sprake is van digitale dienst voor personen jonger dan 18 jaar: een digitale dienst aangeboden die primair bedoeld is voor gebruik door personen jonger dan 18 jaar, dan geldt er een KIA-verplichting, waarbij er een Kinderrechten Impact Assessment moet worden gemaakt, en is er dus sprake van een organisatorische activiteit met KIA-verplichting.
  id: "7"
  type: 
  - task_group
  repeatable: false
  tasks:
  - task: Kinderrechten
    id: "7.1"
    type:
      - task_group
    repeatable: false
    tasks:
    - task: Biedt u een digitale dienst aan of gebruikt u deze? 
      id: "7.1.1"
      type:
      - radio_option
      valueType: boolean
      defaultValue: false
      options: 
      - value: true
        label: Ja
      - value: false 
        label: Nee 
      repeatable: false 
    - task: Biedt u een digitale dienst aan die primair bedoeld is voor gebruik door personen jonger dan 18 jaar?
      id: "7.1.2"
      type:
      - radio_option
      valueType: boolean
      defaultValue: false
      options: 
      - value: true
        label: Ja
      - value: false 
        label: Nee 
      repeatable: false 
      dependencies: 
        - type: conditional 
          condition: 
            id: "7.1.1"
            operator: equals 
            value: true 
          action: show
    - task: Kunt u aantonen dat de dienst niet zal worden gebruikt door personen jonger dan 18 jaar of deze niet wordt ingezet bij personen jonger dan 18 jaar? 
      description: Zorg voor goede leeftijdsverificatie om te voorkomen dat minderjarigen gebruik maken van de digitale dienst.
      id: "7.1.3"
      type:
      - radio_option
      repeatable: false
      valueType: boolean
      defaultValue: false
      options: 
      - value: true
        label: Ja
      - value: false 
        label: Nee 
      dependencies: 
        - type: conditional 
          condition: 
            id: "7.1.1"
            operator: equals 
            value: true 
          action: show
          calculation:
            scoreKey: "digitaledienst_minderjarig"
            expression: "answers('7.1.2') == true ? 2 : (answers('7.1.1') == true && answers('7.1.3') != true) ? 1 : 0"
            riskScore:
              - when: "digitaledienst_minderjarig == 0"
                value: 0
              - when: "digitaledienst_minderjarig == 1"
                value: 1
              - when: "digitaledienst_minderjarig == 2"
                value: 2
assessments:
  - id: "DPIA"
    expression: "
      (
        (scores.gewone_persoonsgegeven || 0) +
        (scores.bijzonder_persoonsgegeven || 0) +
        (scores.gevoelig_persoonsgegeven || 0) +
        (scores.betrokkenen || 0) +
        (scores.aantal_betrokkenen || 0) +
        (scores.frequentie_verwerking || 0) +
        (scores.bewaartermijn || 0) +
        (scores.internationale_doorgifte || 0) +
        (scores.basisregistratie || 0) +
        (scores.digitaledienst_minderjarig || 0) 
      ) > 4|| 
      (countSelectedOptions('3.1') >= 1) ||
      (countSelectedOptions('4.1') >= 2)"
    result: "DPIA verplicht"
    explanation: |
      Een DPIA is verplicht omdat:
       - de som van de risicoscores groter is dan 4, en/of
       - er minimaal 1 item op de AP-lijst is geselecteerd, en/of
       - er minimaal 2 items op de EDPB-lijst zijn geselecteerd.
  - id: "DTIA"
    expression: "
      bool(answers('2.1.1')) && 
      (answers('2.1.3') == 'Buiten EER' || answers('2.1.4') == 'Buiten EER') && 
      answers('2.1.6') in ['Standaard contractsbepaling (SCC)', 'Overig mechanisme']"
    result: "DTIA verplicht"
    explanation: "Een DTIA is verplicht omdat er sprake is van internationale doorgifte buiten de EER 
                 en er gebruik wordt gemaakt van Standaard contractsbepaling of een overig mechanisme."
  - id: "KIA"
    expression: "bool(answers('7.1.1')) && bool(answers('7.1.2'))"
    result: "KIA verplicht" 
    explanation: "Een KIA is verplicht omdat er een digitale dienst wordt aangeboden die primair 
                 bedoeld is voor gebruik door personen jonger dan 18 jaar."
  - id: "IAMA"
    expression: "bool(answers('6.1.1')) && (bool(answers('6.1.2')) || bool(answers('6.1.3')))"
    result: "IAMA verplicht"
    explanation: "Een IAMA is verplicht omdat er gebruik wordt gemaakt van een algoritme 
                 waarbij besluitvorming over mensen plaatsvindt en/of het een hoog-risico AI-systeem betreft."
